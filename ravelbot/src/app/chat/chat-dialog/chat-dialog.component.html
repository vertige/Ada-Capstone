<h1>RavelBot</h1>

<ng-container *ngFor="let message of messages | async">

  <div class="message" [ngClass]="{ 'from': message.sentBy === 'bot',
  'to':   message.sentBy === 'user',
  'selection': message.sentBy === 'selected' }">
    {{ message.content }}
  </div>

  <ng-container *ngIf="message.options?.length > 0">

    <div class="message from">
      <table>
        <ng-container *ngFor="let option of message.options">
          <tr (click)="formValue=option; selectOption()">
            <td>
              <img src={{option.imgURL}} />
            </td>
            <td>
              <h5><a>{{ option.title }}</a></h5> by {{option.designer}}
            </td>
          </tr>
        </ng-container>
      </table>
    </div>
  </ng-container> <!-- end of options loop -->
</ng-container> <!-- end of message of messages loop -->

<ng-container *ngIf="this.currentPrompts.length == 0">
  <label for="nameField">Your Message</label>
  <input [(ngModel)]="formValue" (keyup.enter)="sendMessage()" type="text">
  <button (click)="sendMessage()">Send</button>
</ng-container>

<ng-container *ngIf="this.currentPrompts.length > 0">
  <ng-container *ngFor="let prompt of currentPrompts">
  <button (click)="this[prompt.action]()">{{prompt.text}}</button>
  </ng-container>
</ng-container>
